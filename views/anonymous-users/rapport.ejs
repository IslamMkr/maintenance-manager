<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/list.css">
    </head>

    <body>
        <main>
            <%- include('../includes/header.ejs') %>
            
            <div class="resource-header">
                <div>
                    <h1><%= ressource.resourceName %></h1>
                    <p>Localisation : <b><%= ressource.localisation %></b></p>
                </div>
            </div>

            <hr>

            <form action="/ressources/<%= ressource.rid %>/add-anomalie" method="POST">
                <h1>Rapporter un problème</h1>

                <div class="form-control">
                    <label for="desc">Description de l'anomalie</label>
                    <textarea name="description" id="description" cols="30" rows="10"></textarea>
                </div>

                <button class="btn" type="submit">Rapporter</button>
            </form>

            <hr>

            <h3>Historique d'anomalies</h3>

            <% if (anomalies.length > 0) { %>
                <div class="list-container">
                    <% for (let anomalie of anomalies) { %>
                        <article class="card">
                            <div class="info-item">
                                <label for="description" class="label-item">Description du problème</label>
                                <label for="placeholder-description" class="info-placeholder"><%= anomalie.description %></label>
                            </div>
                            <div class="info-item">
                                <label for="statut" class="label-item">Statut</label>
                                <label for="placeholder-statut" class="info-placeholder"><%= anomalie.anomalieStatus === 'F' ? 'Fixée' : 'Non-Fixée' %></label>
                            </div>
                        </article>
                    <% } %>
                </div>
            <% } else { %>
                <h4>Pas de d'historique d'anomalies pour cette ressource...</h4>
            <% } %>
        </main>